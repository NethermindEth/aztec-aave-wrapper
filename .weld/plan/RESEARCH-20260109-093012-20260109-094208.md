I'll create a detailed implementation plan based on the research findings. Let me first read the necessary documents to understand the current state and requirements.
I can see that the research document (RESEARCH-20260109-093012.md) appears to be incomplete - it just contains conversational text about creating a plan rather than actual research. Let me check what currently exists in the codebase and create a comprehensive implementation plan based on spec.md.
Perfect! Now I understand the full context. The research document (RESEARCH.md) clearly identifies the critical issue: there are **two different architectural approaches** documented, and significant implementation already exists. The RESEARCH-20260109-093012.md file appears to be a draft that wasn't properly saved.

Based on the research findings, I need to create an implementation plan that:
1. Acknowledges the existing implementation (L2, L1, some tests are complete)
2. Aligns with the **original spec.md** (3-layer with Wormhole)
3. Identifies what needs to be modified/completed to match the spec

Let me write a comprehensive implementation plan:
I've created a comprehensive implementation plan that aligns the project with the original specification (spec.md). The plan addresses the critical architectural mismatch identified in the research.

**Key Points of the Plan**:

1. **Acknowledges Existing Work**: Recognizes that Phases 1-3 are partially complete but follow a different architecture

2. **Spec Alignment**: Transforms the implementation from:
   - 2-layer (L2+L1 only) → **3-layer (L2+L1+Target via Wormhole)**
   - Fixed denominations + secrets → **Direct amounts + "anyone can execute"**
   - L1 direct Aave integration → **Wormhole bridge to target chain**

3. **Structured Phases** (29 steps total):
   - **Phase 1**: Foundation alignment (4 steps) - Update dependencies and types
   - **Phase 2**: L2 contract refactoring (5 steps) - Remove secret/denomination logic
   - **Phase 3**: L1 portal refactoring (6 steps) - Replace Aave with Wormhole
   - **Phase 4**: Target executor implementation (5 steps) - Build Aave integration on target chain
   - **Phase 5**: E2E testing (6 steps) - Test three-layer flows
   - **Phase 6**: Documentation (4 steps) - Update all docs

4. **Each Step Includes**:
   - Clear goal and rationale
   - Specific files to modify with code examples
   - Validation commands
   - Known failure modes

Would you like me to:
1. Save this plan to a file (e.g., `PLAN_SPEC_ALIGNED.md` or overwrite existing `PLAN.md`)?
2. Create a more detailed breakdown of any specific phase?
3. Generate a migration checklist for the existing codebase?
